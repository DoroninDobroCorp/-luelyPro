# –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è CluelyPro

**–î–∞—Ç–∞:** 2025-09-30  
**–í–µ—Ä—Å–∏—è:** 0.1.2

---

## üÜï –í–µ—Ä—Å–∏—è 0.1.2 (2025-09-30)

### ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –ø–æ–≤—Ç–æ—Ä —Ç–µ–∑–∏—Å–æ–≤
**–ü—Ä–æ–±–ª–µ–º–∞:** –¢–µ–∑–∏—Å—ã –ø—Ä–æ–∏–∑–Ω–æ—Å–∏–ª–∏—Å—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑ –≤–º–µ—Å—Ç–æ –ø–æ–≤—Ç–æ—Ä–∞ –∫–∞–∂–¥—ã–µ N —Å–µ–∫—É–Ω–¥.

**–ü—Ä–∏—á–∏–Ω–∞:** –í –º–µ—Ç–æ–¥–µ `_announce_thesis()` –±—ã–ª–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `need_announce()`, –∫–æ—Ç–æ—Ä–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∞–ª–∞ –ø–æ–≤—Ç–æ—Ä –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –æ–±—ä—è–≤–ª–µ–Ω–∏—è (—Ñ–ª–∞–≥ `_announced` —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–ª—Å—è –≤ `True`).

**–†–µ—à–µ–Ω–∏–µ:**
- –£–±—Ä–∞–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `need_announce()` –∏–∑ –º–µ—Ç–æ–¥–∞ `_announce_thesis()` (live_recognizer.py:1652)
- –¢–µ–ø–µ—Ä—å —Ç–µ–∑–∏—Å –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ `THESIS_REPEAT_SEC` —Å–µ–∫—É–Ω–¥ –ø–æ–∫–∞ –Ω–µ –±—É–¥–µ—Ç –∑–∞–∫—Ä—ã—Ç –æ—Ç–≤–µ—Ç–æ–º

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```bash
# –û–±—ã—á–Ω—ã–π —Ä–µ–∂–∏–º - –ø–æ–≤—Ç–æ—Ä –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
./run.sh live --profile profiles/v28.npz

# –ë—ã—Å—Ç—Ä—ã–π –ø–æ–≤—Ç–æ—Ä - –∫–∞–∂–¥—ã–µ 3 —Å–µ–∫—É–Ω–¥—ã
THESIS_REPEAT_SEC=3 ./run.sh live --profile profiles/v28.npz
```

### üìù –°–æ–∑–¥–∞–Ω `run_short.sh` - —Ä–µ–∂–∏–º —Å –æ–¥–Ω–∏–º –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ–º
–ù–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è —Ä–µ–∂–∏–º–∞ –±–µ–∑ –∞–≤—Ç–æ–ø–æ–≤—Ç–æ—Ä–∞ —Ç–µ–∑–∏—Å–æ–≤ (—Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ):

```bash
# –¢–µ–∑–∏—Å—ã –ø—Ä–æ–∏–∑–Ω–æ—Å—è—Ç—Å—è 1 —Ä–∞–∑, –±–µ–∑ –∞–≤—Ç–æ–ø–æ–≤—Ç–æ—Ä–∞
./run_short.sh live --profile profiles/v28.npz
```

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:** `THESIS_REPEAT_SEC=999999` (–ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–∫–ª—é—á–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä)

---

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (0.1.1)

### 1. üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω `.gitignore`**: —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω `.env` (—Å—Ç—Ä–æ–∫–∏ 20-21)
- ‚ö†Ô∏è **–í–ê–ñ–ù–û**: –ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Ä–æ—Ç–∏—Ä–æ–≤–∞—Ç—å API –∫–ª—é—á –≤ Google AI Studio, —Ç.–∫. —Ç–µ–∫—É—â–∏–π –∫–ª—é—á –ø–æ–ø–∞–ª –≤ git

### 2. üì¶ –ù–æ–≤—ã–π –º–æ–¥—É–ª—å: `config.py`
–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–º–µ—Å—Ç–æ —Ä–∞–∑–±—Ä–æ—Å–∞–Ω–Ω—ã—Ö magic numbers:

```python
from config import AppConfig

# –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
cfg = AppConfig.from_env()

# –ò–ª–∏ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥
cfg = AppConfig.default()

# –î–æ—Å—Ç—É–ø –∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º
print(cfg.asr.model)  # "tiny"
print(cfg.verifier.distance_threshold)  # 0.75
print(cfg.thesis.repeat_interval_sec)  # 10.0
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ
- –¢–∏–ø–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ dataclasses
- –£–¥–æ–±–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑ ENV
- –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–µ—Ñ–æ–ª—Ç—ã

### 3. üö® –ù–æ–≤—ã–π –º–æ–¥—É–ª—å: `exceptions.py`
–ö–∞—Å—Ç–æ–º–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è –ª—É—á—à–µ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫:

```python
from exceptions import ASRError, LLMError, ProfileError

try:
    text = asr.transcribe(audio)
except ASRError as e:
    logger.error(f"ASR failed: {e}")
    # –°–ø–µ—Ü–∏—Ñ–∏—á–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ ASR –æ—à–∏–±–æ–∫
```

**–¢–∏–ø—ã –∏—Å–∫–ª—é—á–µ–Ω–∏–π:**
- `AudioDeviceError` - –ø—Ä–æ–±–ª–µ–º—ã —Å –º–∏–∫—Ä–æ—Ñ–æ–Ω–æ–º
- `ASRError` - –æ—à–∏–±–∫–∏ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏–∏
- `LLMError` - –æ—à–∏–±–∫–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ LLM
- `ThesisGenerationError` - –æ—à–∏–±–∫–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–µ–∑–∏—Å–æ–≤
- `ThesisJudgeError` - –æ—à–∏–±–∫–∏ —Å—É–¥—å–∏
- `TTSError` - –æ—à–∏–±–∫–∏ —Å–∏–Ω—Ç–µ–∑–∞ —Ä–µ—á–∏
- `VADError` - –æ—à–∏–±–∫–∏ VAD
- `EmbeddingError` - –æ—à–∏–±–∫–∏ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
- `ProfileError` - –æ—à–∏–±–∫–∏ –ø—Ä–æ—Ñ–∏–ª–µ–π
- `ConfigError` - –æ—à–∏–±–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- `WebSocketError` - –æ—à–∏–±–∫–∏ WebSocket

### 4. üìù –£–ª—É—á—à–µ–Ω `.env.example`
–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤—Å–µ—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è:

- –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–µ–∫—Ü–∏–∏ (API Keys, –†–µ–∂–∏–º—ã, ASR, –¢–µ–∑–∏—Å—ã, VAD, –∏ —Ç.–¥.)
- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏
- –ü—Ä–∏–º–µ—Ä—ã –∑–Ω–∞—á–µ–Ω–∏–π
- –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –≤–ª–∏—è–Ω–∏—è –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- `ASR_MODEL=tiny` –¥–ª—è –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–∏ (~0.5—Å)
- `ASR_MODEL=small` –¥–ª—è –±–∞–ª–∞–Ω—Å–∞ –∫–∞—á–µ—Å—Ç–≤–æ/—Å–∫–æ—Ä–æ—Å—Ç—å (~1-2—Å)
- `ASR_MODEL=large-v3-turbo` –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞ (~3-5—Å)

### 5. üì¶ –û–±–Ω–æ–≤–ª—ë–Ω `pyproject.toml`
–î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ –º–æ–¥—É–ª–∏ –≤ `py-modules`:
- `config`
- `exceptions`

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```bash
‚úì Config –∑–∞–≥—Ä—É–∂–µ–Ω: ASR=tiny, Threshold=0.75
‚úì –ó–∞–≥—Ä—É–∂–µ–Ω–æ 6 –∏—Å–∫–ª—é—á–µ–Ω–∏–π
‚úì .gitignore –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç .env
```

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (–∏–∑ IMPROVEMENTS.md)

### –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
1. **–†–æ—Ç–∏—Ä–æ–≤–∞—Ç—å API –∫–ª—é—á** –≤ Google AI Studio
2. –£–¥–∞–ª–∏—Ç—å `.env` –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏ git: `git filter-branch` –∏–ª–∏ BFG Repo-Cleaner
3. –†–∞–∑–±–∏—Ç—å `live_recognizer.py` (2148 —Å—Ç—Ä–æ–∫) –Ω–∞ –º–æ–¥—É–ª–∏
4. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–æ–≤—ã–π `config.py` –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º –∫–æ–¥–µ

### –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
5. –£–ª—É—á—à–∏—Ç—å UX –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (–ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä, –∏—Å—Ç–æ—Ä–∏—è)
6. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∫–∞—Å—Ç–æ–º–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –≤–º–µ—Å—Ç–æ –æ–±—â–∏—Ö `except Exception`
7. –î–æ–±–∞–≤–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
8. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–±–æ—Ä –º–µ—Ç—Ä–∏–∫

### –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
9. –†–∞—Å—à–∏—Ä–∏—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ
10. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CI/CD (GitHub Actions)
11. –î–æ–±–∞–≤–∏—Ç—å pre-commit hooks

---

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **IMPROVEMENTS.md** - –ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π —Å –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏–µ–π
- **.env.example** - –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- **config.py** - —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å docstrings
- **exceptions.py** - –∫–∞—Å—Ç–æ–º–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏

---

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ –Ω–æ–≤—ã–µ –º–æ–¥—É–ª–∏

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ config.py –≤ live_recognizer.py

**–î–æ:**
```python
self.threshold = threshold
self.asr_model_size = asr_model_size
self._thesis_repeat_sec = float(os.getenv("THESIS_REPEAT_SEC", "10"))
```

**–ü–æ—Å–ª–µ:**
```python
from config import AppConfig

cfg = AppConfig.from_env()
self.threshold = cfg.verifier.distance_threshold
self.asr_model_size = cfg.asr.model
self._thesis_repeat_sec = cfg.thesis.repeat_interval_sec
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ exceptions.py

**–î–æ:**
```python
try:
    text = self._ensure_asr().transcribe_np(audio, sr)
except Exception as e:  # –°–ª–∏—à–∫–æ–º –æ–±—â–µ–µ!
    logger.exception(f"ASR –æ—à–∏–±–∫–∞: {e}")
```

**–ü–æ—Å–ª–µ:**
```python
from exceptions import ASRError

try:
    text = self._ensure_asr().transcribe_np(audio, sr)
except ASRError as e:
    logger.exception(f"ASR –æ—à–∏–±–∫–∞: {e}")
    # –°–ø–µ—Ü–∏—Ñ–∏—á–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
```

---

## üìà –ú–µ—Ç—Ä–∏–∫–∏ —É–ª—É—á—à–µ–Ω–∏–π

- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: `.env` —Ç–µ–ø–µ—Ä—å –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è git ‚úÖ
- **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å**: +3 –Ω–æ–≤—ã—Ö –º–æ–¥—É–ª—è —Å —á—ë—Ç–∫–æ–π –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å—é
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: .env.example —Ä–∞—Å—à–∏—Ä–µ–Ω —Å 15 –¥–æ 120 —Å—Ç—Ä–æ–∫
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–º–µ—Å—Ç–æ —Ä–∞–∑–±—Ä–æ—Å–∞–Ω–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

---

## ‚ö†Ô∏è –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è

**–í—ã–ø–æ–ª–Ω–∏—Ç—å –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ:**

1. –†–æ—Ç–∏—Ä–æ–≤–∞—Ç—å API –∫–ª—é—á:
   ```bash
   # 1. –ü–æ–ª—É—á–∏—Ç—å –Ω–æ–≤—ã–π –∫–ª—é—á: https://aistudio.google.com/app/apikey
   # 2. –û–±–Ω–æ–≤–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π .env
   # 3. –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–π –∫–ª—é—á –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏ git
   git filter-repo --path .env --invert-paths
   # –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å BFG: https://rtyley.github.io/bfg-repo-cleaner/
   ```

2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ .env –±–æ–ª—å—à–µ –Ω–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è:
   ```bash
   git status  # .env –Ω–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ —Å–ø–∏—Å–∫–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
   ```

---

**–ê–≤—Ç–æ—Ä —É–ª—É—á—à–µ–Ω–∏–π:** Cascade AI  
**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:** ‚úÖ –í—Å–µ –º–æ–¥—É–ª–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
