# ============================================================================
# CluelyPro Configuration
# ============================================================================
# Скопируйте этот файл как .env и заполните своими значениями
# ВАЖНО: .env не должен попадать в git! Проверьте .gitignore

# ============================================================================
# API Keys (обязательно)
# ============================================================================
# Получить ключ: https://aistudio.google.com/app/apikey
GEMINI_API_KEY=your_gemini_api_key_here

# ============================================================================
# Режимы работы
# ============================================================================
# AI-only: генерировать тезисы только из вопросов собеседника (1) 
# или использовать статические тезисы из theses.txt (0)
AI_ONLY_THESIS=1

# Режим комментариев: генерировать короткие факты даже без явных вопросов
# Полезно для практики импровизации (0 = выключено)
COMMENTARY_MODE=0

# Фильтрация вопросов: gemini (точнее) | heuristic (быстрее)
QUESTION_FILTER_MODE=gemini

# Минимальная длина текста для обработки как вопроса (символы)
QUESTION_MIN_LEN=8

# Добавлять исходный вопрос к концу ответа LLM (0 = нет)
APPEND_QUESTION_TO_ANSWER=0

# ============================================================================
# ASR (Automatic Speech Recognition)
# ============================================================================
# Модель faster-whisper: tiny (быстро) | base | small | medium | large-v3-turbo (точно)
# Рекомендации:
#   - tiny: латентность ~0.5с, хорошо для практики
#   - small: латентность ~1-2с, баланс качество/скорость
#   - large-v3-turbo: латентность ~3-5с, максимальное качество
ASR_MODEL=tiny

# Язык распознавания (ru = русский, en = английский, None = авто)
ASR_LANG=ru

# Устройство для ASR: cuda | cpu | None (авто: cuda если доступен)
# ASR_DEVICE=cuda

# Тип вычислений: float16 (GPU) | int8 (CPU) | None (авто)
# ASR_COMPUTE_TYPE=float16

# ============================================================================
# Тезисы
# ============================================================================
# Интервал повтора текущего тезиса (секунды), если он ещё не закрыт
THESIS_REPEAT_SEC=10

# Размер пакета автогенерируемых тезисов (обычно 2-4)
THESIS_AUTOGEN_BATCH=3

# Порог совпадения по токенам (0..1, меньше = быстрее закрывается тезис)
# Рекомендуемое значение: 0.3 (30% совпадения достаточно)
THESIS_MATCH_THRESHOLD=0.3

# Порог семантической близости (0..1)
THESIS_SEMANTIC_THRESHOLD=0.5

# Минимальная уверенность Gemini-судьи для закрытия тезиса (0..1)
THESIS_GEMINI_MIN_CONF=0.55

# ============================================================================
# Voice Verification (свой/чужой голос)
# ============================================================================
# Порог косинусной дистанции (<= считается "мой голос")
# Меньше = строже (0.3 очень строго, 0.9 очень мягко)
VOICE_THRESHOLD=0.75

# Путь к профилю голоса (автоматически выбирается при запуске)
# PROFILE=profiles/my_voice.npz

# ============================================================================
# VAD (Voice Activity Detection)
# ============================================================================
# Бэкенд: webrtc (быстрый) | silero (точный, но медленнее)
VAD_BACKEND=webrtc

# Агрессивность WebRTC VAD (0..3, выше = строже к шумам)
VAD_AGGRESSIVENESS=2

# Минимум подряд речевых фреймов (20ms каждый) для старта сегмента
MIN_CONSEC_FRAMES=5

# Порог спектральной плоскостности для отбраковки шумов (0..1, меньше = строже)
FLATNESS_THRESHOLD=0.60

# Настройки Silero VAD (если VAD_BACKEND=silero)
SILERO_VAD_THRESHOLD=0.5
SILERO_VAD_WINDOW_MS=100

# ============================================================================
# Логирование
# ============================================================================
# Уровни: DEBUG | INFO | WARNING | ERROR
CONSOLE_LOG_LEVEL=INFO
FILE_LOG_LEVEL=DEBUG
LOG_DIR=logs

# ============================================================================
# Тестирование и отладка
# ============================================================================
# Авто-остановка через N секунд (0 = бесконечно)
# Полезно для CI/CD и дымовых тестов
# RUN_SECONDS=10
# ASSISTANT_RUN_SECONDS=10

# ============================================================================
# Web-режим (WebSocket сервер)
# ============================================================================
# HOST=127.0.0.1
# WS_PORT=8765
# HTTP_PORT=8000